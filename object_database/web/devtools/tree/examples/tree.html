<!DOCTYPE html>
<html>
  <head>
    <title>Basic Tree Tests</title>
    <link rel="stylesheet" href="../tree.css" />
    <script type="module" src="../dist/tree.bundle.js"></script>
  </head>
  <body>
      <div id="main" ></div>
  </body>
  <script>
   const treeMaker = function(depth, maxChildNum){
       let rootNode = {
           name: "root",
            id: "roodID",
            order: -1,
           children: []
       };
       rootNode = addChildren(rootNode, 0, depth, maxChildNum);
       return rootNode;
   }

   const addChildren = (node, depth, totalDepth, maxChildNum) => {
       const numChildren = Math.ceil(Math.random()* maxChildNum);
       if (depth <= totalDepth) {
            for (let i = 1; i <= numChildren; i++){
                const child = {
                        name: `node_${depth}_${i}`,
                        id: "id-" + crypto.randomUUID(),
                        order: i,
                        children: []
                };
                node.children.push(
                    addChildren(child, depth + 1, totalDepth, maxChildNum)
                );

            }
       }
       return node;
   }

   const data = treeMaker(3, 2);
   console.log(data);
   document.addEventListener("DOMContentLoaded", () => {
       const tree = document.createElement("tree-graph");
       const main = document.getElementById("main");
       main.append(tree);
       tree.setup(data);
       // tree.setupLeaderLines(data);
    });
  </script>
</html>
